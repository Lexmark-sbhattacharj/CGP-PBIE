<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<script>
	$(document).ready(function(){
		$("#updateAnnouncementModal").modal('show');
	});
</script>
<% content_for :vue_js do %>
  <%= javascript_pack_tag 'admin_vue' %>
<% end %>
    
<flash-message class="flash-ah-ah"></flash-message>

<section class="section">
  <div class="columns is-gapless">
    
    
    <div class="column">
      <div style="padding: 20px;">
      <h3 class="title" v-if="selectedWorkspace" style="margin-bottom:10px;">

        <% if @current_user.is_admin? %>
        <div class="tabs is-toggle is-centered">
          <ul>
            <li><a href="/admin">Workspaces</a></li>
            <li><a href="/admin/people">People</a></li>
            <li class="is-active"><a style="border-color:#6d6e71!important; background-color:#6d6e71!important" href="/announcements">Announcement</a></li>
          </ul>
        </div>
        <% end %>
        <div class="tabs is-toggle is-centered">
          <ul>
            <li><a class="button is-primary is-pulled-right" v-on:click="backToAnnouncement()">Announcement Lists</a></li>
          </ul>
        </div>
      </h3>
    <section class="section">
<div id="updateAnnouncementModal">
<div class="modal-background"></div>
<div class="modal-card">
  <header class="modal-card-head">
    <p class="modal-card-title">Update Announcement</p>
    <button type="button" class="delete" data-dismiss="modal" v-on:click="backToAnnouncement()" style="float: right;">&times;</button>
  </header>
  <section class="modal-card-body">
  <div class="field">
      <div class="control">
        <label class="label">Details</label>
        <textarea class="textarea" v-model="announcements.title" placeholder=""><%=@announcements.title%></textarea>
      </div>
    </div>

    <div class="field">
      <label class="label">Start Date</label>
      <div class="control">
        <span v-if="showAnnouncement"></span>
        <input class="input"  v-model="announcements.start_date" type="datetime-local" placeholder="Enter Start Time"/>
      </div>
    </div>
    
    <div class="field">
      <label class="label">End Date</label>
      <div class="control">
        <span v-if="showAnnouncement"></span>
        <input class="input"  v-model="announcements.end_date" type="datetime-local" placeholder="Enter End Time"/>
      </div>
    </div>

    <div class="field">
      <label class="label">Scope</label>
      <div class="control">
        <span v-if="showAnnouncement"></span>
        <select v-model="announcements.scope">
             <option disabled value="">Please select one</option>
             <option value="Global">GLOBAL</option>
             <option v-for="item in workspaces" :value="item.name">{{item.name}}</option>
     </select>
      </div>
    </div>
  </section>
  
  <footer class="modal-card-foot">
    <button class="button is-success" v-on:click="updateAnnouncement();  updateAnnouncement = false; updateAnnouncementConfirmation = true; announcements.title = ''; announcements.start_date = '', announcements.end_date = ''">Update</button>
  </footer>
</div>
</div>
</section>
<section class="section">
<div v-bind:class="{modal: true, 'is-active': updateAnnouncementConfirmation }">
<div class="modal-background"></div>
<div class="modal-card">
  <header class="modal-card-head">
    <p class="modal-card-title">Update Announcement</p>
    <button class="delete" aria-label="close" v-on:click="updateAnnouncementConfirmation=false; backToAnnouncement();"></button>
  </header>
  <section class="modal-card-body">
  <div class="field">
      <label class="label">Announcement updated successfully</label>
    </div>
  </section>
</div>
</div>
</section>   
    </div>
    </div>
  </div>
</section>
